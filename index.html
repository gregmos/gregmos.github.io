<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Инсайт: Судебные решения</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg%20width%3D%2280%22%20height%3D%2280%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%3Crect%20width%3D%2280%22%20height%3D%2280%22%20rx%3D%2210%22%20fill%3D%22%234285F4%22/%3E%3Cline%20x1%3D%2240%22%20y1%3D%2220%22%20x2%3D%2240%22%20y2%3D%2245%22%20stroke%3D%22white%22%20stroke-width%3D%223%22/%3E%3Cline%20x1%3D%2220%22%20y1%3D%2235%22%20x2%3D%2260%22%20y2%3D%2235%22%20stroke%3D%22white%22%20stroke-width%3D%223%22/%3E%3Cline%20x1%3D%2220%22%20y1%3D%2235%22%20x2%3D%2228%22%20y2%3D%2245%22%20stroke%3D%22white%22%20stroke-width%3D%223%22/%3E%3Cline%20x1%3D%2260%22%20y1%3D%2235%22%20x2%3D%2252%22%20y2%3D%2245%22%20stroke%3D%22white%22%20stroke-width%3D%223%22/%3E%3Ccircle%20cx%3D%2228%22%20cy%3D%2245%22%20r%3D%223%22%20fill%3D%22white%22/%3E%3Ccircle%20cx%3D%2252%22%20cy%3D%2245%22%20r%3D%223%22%20fill%3D%22white%22/%3E%3C/svg%3E">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background-color: #fafafa;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 10px;
      color: #333;
    }
    #loginSection, #mainSection, #settingsSection {
      display: none;
    }
    button {
      background: none;
      border: none;
      cursor: pointer;
      font: inherit;
    }
    button:hover {
      opacity: 0.9;
    }
    .icon-button {
      background-color: transparent;
      font-size: 1.125rem;
    }
    .custom-button {
      display: inline-block;
      box-sizing: border-box;
      width: 160px;
      padding: 8px 12px;
      margin: 10px 5px 10px 0;
      border-radius: 4px;
      background-color: #4285F4;
      color: #fff;
      font-size: 14px;
      text-align: center;
      white-space: nowrap;
      text-decoration: none;
    }

    #uploadFileBtn.custom-button {
      background-color: #4CAF50 !important;
      color: #fff;
    }
    .custom-button:hover {
      opacity: 0.9;
    }
    #settingsBtn svg,
    #signOutBtn svg {
      width: 24px;
      height: 24px;
    }
    #settingsBtn svg {
      fill: #555;
    }
    #signOutBtn svg {
      fill: #d32f2f;
    }
    .header-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .header-actions {
      display: flex;
      gap: 10px;
    }
    #creditInfo {
      margin-bottom: 20px; /* <-- добавлен отступ */
    }
    /* Стили для списка проектов */
    #projectList {
      list-style: none;
      padding: 0;
      font-size: 1rem;
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      background-color: #fff;
      margin-bottom: 20px;
    }

    /* Используем grid, как в popup.html */
    #projectList li {
      display: grid;
      grid-template-columns: auto 24px 24px;
      align-items: center;
      gap: 8px;
      padding: 10px;
      border-bottom: 1px solid #e0e0e0;
    }

    /* Обеспечиваем, чтобы обёртка для иконок не нарушала сетку */
    #projectList li div {
      display: contents;
    }
    #projectList li:last-child {
      border-bottom: none;
    }
    #projectList li.selected {
      background-color: #e3f2fd;
    }
    /* <-- Добавляем класс для контейнера иконок (Drive + корзина) */
    .icons-container {
      display: flex;
      align-items: center;
      gap: 10px; /* небольшое расстояние между иконками */
    }
    #newProjectContainer {
      margin-top: 10px;
    }
    #newProjectForm {
      display: flex;
      align-items: center;
      margin-top: 10px;
    }
    #newProjectInput {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
      margin-right: 10px;
    }
    #confirmNewProjectBtn,
    #cancelNewProjectBtn {
      padding: 6px 10px;
      font-size: 1rem;
      border: 1px solid #4285F4;
      border-radius: 4px;
      background-color: transparent;
      color: #4285F4;
    }
    #loginSection {
      text-align: center;
      padding: 40px 20px;
    }
    #loginSection h1 {
      font-size: 2rem;
      margin-bottom: 10px;
      color: #333;
    }
    #loginSection p {
      font-size: 1rem;
      color: #555;
      line-height: 1.5;
      margin-bottom: 20px;
    }
    progress {
      width: 100%;
      height: 20px;
    }
    #loginBtnContainer {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }
    @media (max-width: 768px) {
      .header-container {
        flex-direction: column;
        align-items: flex-start;
      }
      .header-actions {
        margin-top: 10px;
      }
    }
    /* <-- Добавляем стили для футера */
    footer {
      text-align: center;
      margin-top: 40px;
      padding: 10px 0;
      color: #555;
    }
    footer a {
      color: #4285F4;
      text-decoration: none;
      margin: 0 10px;
    }
    footer a:hover {
      text-decoration: underline;
    }
    #settingsSection {
      /* Внутренние отступы секции настроек */
      padding: 20px;
    }

    .checkbox-columns {
      /* Разместить колонки с чекбоксами в строку с зазором */
      display: flex;
      gap: 20px;
      margin: 20px 0;
    }

    .checkbox-column {
      /* Каждая колонка — вертикальный блок с отступами между чекбоксами */
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .checkbox-container {
      /* Немного отступа под каждый чекбокс */
      margin-bottom: 10px;
    }
    .drive-icon {
      margin-top: 6px;      /* Дополнительный отступ сверху */
      align-self: flex-end;  /* Выравнивание по нижнему краю контейнера */
    }
    #noProjectsMessage {
      display: none;
      margin-top: 10px;
      font-size: 14px;
      background-color: #f9f9f9;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
    }
    #noProjectsMessage p {
      margin: 0 0 10px 0;
    }
    #noProjectsMessage p:last-child {
      margin-bottom: 0;
    }

  </style>
</head>
<body>
  <div class="container">
    <!-- Экран логина -->
    <div id="loginSection">
      <div class="logo-container">
        <svg width="80" height="80" xmlns="http://www.w3.org/2000/svg">
          <rect width="80" height="80" rx="10" fill="#4285F4"/>
          <line x1="40" y1="20" x2="40" y2="45" stroke="white" stroke-width="3"/>
          <line x1="20" y1="35" x2="60" y2="35" stroke="white" stroke-width="3"/>
          <line x1="20" y1="35" x2="28" y2="45" stroke="white" stroke-width="3"/>
          <line x1="60" y1="35" x2="52" y2="45" stroke="white" stroke-width="3"/>
          <circle cx="28" cy="45" r="3" fill="white"/>
          <circle cx="52" cy="45" r="3" fill="white"/>
        </svg>
      </div>
      <h1>Инсайт</h1>
        <p>Эта программа помогает структурировать и проанализировать вашу подборку судебных решений.</p>
        <p>Загрузив файлы с судебными решениями, они автоматически сохранятся на ваш Google Диск в виде папки с таблицей Google Spreadsheet, где будет отражена подробная информация о каждом судебном решении, включая: анализ правовой позиции, применяемые нормы права, судебная практика и иное.</p>
        <p>Вы сможете настроить отображение данных в таблице в разделе «Настройки».</p>
      <button id="oauthSignInBtn" class="custom-button">Войти через Google</button>
    </div>

    <!-- Основной экран -->
    <div id="mainSection">
      <div class="header-container">
        <h1>Мои проекты</h1>
        <div class="header-actions">
          <button id="settingsBtn" title="Настройки">
            <svg viewBox="0 0 24 24">
              <path d="M19.14,12.94a7.07,7.07,0,0,0,.05-.94,7.07,7.07,0,0,0-.05-.94l2.11-1.65a.5.5,0,0,0,.12-.61l-2-3.46a.5.5,0,0,0-.6-.22l-2.49,1a7.14,7.14,0,0,0-1.63-.94L14.5,2.81a.5.5,0,0,0-.5-.31H10a.5.5,0,0,0-.5.31L8.93,5.16a7.14,7.14,0,0,0-1.63.94l-2.49-1a.5.5,0,0,0-.6.22l-2,3.46a.5.5,0,0,0,.12.61L4.86,11.06a7.07,7.07,0,0,0-.05.94,7.07,7.07,0,0,0,.05.94L2.75,14.59a.5.5,0,0,0-.12.61l2,3.46a.5.5,0,0,0,.6.22l2.49-1a7.14,7.14,0,0,0,1.63.94l.57,2.35a.5.5,0,0,0,.5.31h4a.5.5,0,0,0,.5-.31l.57-2.35a7.14,7.14,0,0,0,1.63-.94l2.49,1a.5.5,0,0,0,.6-.22l2-3.46a.5.5,0,0,0-.12-.61Z"/>
              <circle cx="12" cy="12" r="3.5"/>
            </svg>
          </button>
          <button id="signOutBtn" class="icon-button" title="Выйти">
            <svg viewBox="0 0 24 24">
              <path d="M10 9v6h5v4l5-5-5-5v4h-5zM3 3h9v2H5v14h7v2H3V3z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Информация о кредитах с отступом -->
      <div id="creditInfo">Загрузка кредитов...</div>

      <div id="noProjectsMessage" style="display: none; margin-top: 10px;">
        <p>Добавьте проект, чтобы начать работу с вашей подборкой судебных решений.</p>
        <p>При добавлении проекта на вашем Google Drive автоматически создается папка с соответствующим названием, куда будут сохраняться загруженные решения, а также таблица Google Spreadsheet с информацией из загруженных решений.</p>
        <p>Содержание таблицы можно настроить в разделе «Настройки» выше.</p>
      </div>

      <ul id="projectList"></ul>

      <div id="newProjectContainer">
        <button id="showNewProjectBtn" class="custom-button">Добавить проект</button>
        <div id="newProjectForm" style="display: none;">
          <input type="text" id="newProjectInput" placeholder="Например: Решения по патентным спорам">
          <button id="confirmNewProjectBtn" class="icon-button" title="Подтвердить">✔</button>
          <button id="cancelNewProjectBtn" class="icon-button" title="Отмена">✖</button>
        </div>
      </div>

      <!-- Загрузка файлов -->
      <div id="uploadContainer" style="margin-top: 20px;">
        <input type="file" id="pdfFileInput" accept="application/pdf, application/vnd.openxmlformats-officedocument.wordprocessingml.document" multiple style="display: none;">
        <label for="pdfFileInput" class="custom-button" title="Поддерживаются Docx и PDF файлы. Один документ должен содержать одно решение">Выбрать решения</label>
        <button id="uploadFileBtn" class="custom-button" style="display: none;">Обработать</button>
      </div>

      <!-- Прогресс загрузки -->
      <div id="progressContainer" style="display: none; margin-top: 10px;">
        <progress id="uploadProgress" value="0" max="100"></progress>
        <span id="progressText" style="font-size: 1rem; margin-left: 5px;"></span>
      </div>

      <!-- Прогресс фоновой обработки -->
      <div id="celeryProgressContainer" style="display: none; margin-top: 10px;">
        <div>Обработка файлов: <span id="celeryProgressText">0/0</span></div>
        <progress id="celeryProgressBar" value="0" max="100"></progress>
      </div>
    </div>

    <!-- Экран настроек -->
    <div id="settingsSection">
      <h1>Настройки обработки</h1>
      <p>Здесь можно настроить параметры обработки судебных решений.</p>
      <div class="checkbox-columns">
        <div class="checkbox-column">
          <div class="checkbox-container">
            <input type="checkbox" id="field1" value="Название суда" checked>
            <label for="field1">Название суда</label>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="field2" value="Номер дела" checked>
            <label for="field2">Номер дела</label>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="field3" value="Дата решения" checked>
            <label for="field3">Дата решения</label>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="field4" value="Истец" checked>
            <label for="field4">Истец</label>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="field5" value="Ответчик" checked>
            <label for="field5">Ответчик</label>
          </div>
        </div>
        <div class="checkbox-column">
          <div class="checkbox-container">
            <input type="checkbox" id="field6" value="Фабула дела" checked>
            <label for="field6">Фабула дела</label>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="field7" value="Правовое обоснование принятия решения" checked>
            <label for="field7">Правовое обоснование принятия решения</label>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="field8" value="Краткие выводы резолютивной части" checked>
            <label for="field8">Краткие выводы резолютивной части</label>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="field9" value="Ссылки на нормы права" checked>
            <label for="field9">Ссылки на нормы права</label>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="field10" value="Ссылки на судебную практику" checked>
            <label for="field10">Ссылки на судебную практику</label>
          </div>
        </div>
      </div>
      <button id="saveSettingsBtn" class="custom-button">Принять изменения</button>
      <button id="cancelSettingsBtn" class="custom-button">Отмена</button>
    </div>
  </div>

  <!-- Футер по центру (Политика и Условия) -->
  <footer>
    <a href="privacy.html">Политика конфиденциальности</a>
    <a href="terms.html">Условия использования</a>
  </footer>

  <script src="app.js"></script>
</body>
</html>
